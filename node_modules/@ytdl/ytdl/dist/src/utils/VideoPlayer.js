"use strict";
exports.__esModule = true;
var child_process_1 = require("child_process");
var VideoPlayer = /** @class */ (function () {
    function VideoPlayer(player) {
        this.players = [
            'cvlc',
            'vlc',
            'mplayer',
            'afplay',
            'play',
            'omxplayer',
            'aplay',
        ];
        this.player = '';
        this.setPlayer(player);
    }
    /**
     * Select player to play media using.
     * @param player Stores the media player
     */
    VideoPlayer.prototype.setPlayer = function (player) {
        this.player = player || 'cvlc';
        if (this.players.indexOf(this.player) === -1) {
            throw new Error(this.player + " is not a compatible media player.");
        }
    };
    /**
     * Play video given a url and a stream.
     * @param url Stream URL
     * @param stream Media stream
     */
    VideoPlayer.prototype.play = function (url, stream) {
        stream.destroy(); // Video player does not support streams right now
        var subprocess = child_process_1.spawn(this.player, [url], { stdio: 'ignore' });
        if (!subprocess) {
            throw new Error("Unable to spawn subprocess with " + this.player);
        }
        subprocess.on('close', function () { process.exit(0); });
        return subprocess;
    };
    return VideoPlayer;
}());
exports["default"] = VideoPlayer;
